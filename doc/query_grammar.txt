== Грамматика языка запросов ==



Выражение ::= Выражение 'ИЛИ' Слагаемое | Слагаемое
Слагаемое ::= Слагаемое 'И' Множитель | Множитель
Множитель ::= НЕ Элемент | Элемент
Элемент ::= Тег | Поле | Директория | Пользователь | '(' Выражение ')'
Тег ::= <слово_без_пробелов>
Поле ::= Тег ОперацияНадПолем Значение
ОперацияНадПолем ::= '=' | '>' | '>=' | '<' | '<=' | '!='
Значение ::= Строка | Число
Строка ::= <то же самое как и Тег>
Число ::= <целое или вещественное>
Директория ::= 'dir:' <путь внутри хранилища>
Пользователь ::= 'user:' <логин пользователя хранилища>


Примеры запросов:

(Книги ИЛИ Музыка) Рейтинг>=3 dir:other/new user:vlkv user:leno4ka 

Что делать если путь внутри хранилища содержит пробелы?
Как можно разрешить, чтобы частью тега могли быть знаки пунктуации (пусть и не все). Escape-последовательности?


